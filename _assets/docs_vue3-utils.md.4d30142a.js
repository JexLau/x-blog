import{g as n,j as s,l as a,f as t,q as o}from"./common-bec3f312.js";const e='{"title":"纪年 |【第二期】Vue3 源码中的基础工具函数","frontmatter":{"date":"2021-08-18","title":"纪年 |【第二期】Vue3 源码中的基础工具函数","tags":["源码","vue3"],"describe":"Vue3 中的工具函数源码解读记录"},"headers":[{"level":2,"title":"1. 解读前的准备","slug":"_1-解读前的准备"},{"level":2,"title":"2. 源码调试","slug":"_2-源码调试"},{"level":3,"title":"2.1 阅读开源项目的 README.md 和贡献指南 contributing.md","slug":"_2-1-阅读开源项目的-readme-md-和贡献指南-contributing-md"},{"level":3,"title":"2.2 打包构建项目代码","slug":"_2-2-打包构建项目代码"},{"level":3,"title":"2.3 生成 sourcemap 调试 vue-next 源码","slug":"_2-3-生成-sourcemap-调试-vue-next-源码"},{"level":2,"title":"3. 工具函数（TS 版）","slug":"_3-工具函数（ts-版）"},{"level":3,"title":"3.1 babelParserDefaultPlugins：babel 解析默认插件","slug":"_3-1-babelparserdefaultplugins：babel-解析默认插件"},{"level":3,"title":"3.2 EMPTYOBJ：空对象，EMPTYARR：空数组","slug":"_3-2-empty-obj：空对象，empty-arr：空数组"},{"level":3,"title":"3.3 NOOP：空函数","slug":"_3-3-noop：空函数"},{"level":3,"title":"3.4 NO：永远返回 false 的函数","slug":"_3-4-no：永远返回-false-的函数"},{"level":3,"title":"3.5 isOn：判断字符串是否以 on 开头，并且 on 后首字母是非小写字母","slug":"_3-5-ison：判断字符串是否以-on-开头，并且-on-后首字母是非小写字母"},{"level":3,"title":"3.6 isModelListener：监听器","slug":"_3-6-ismodellistener：监听器"},{"level":3,"title":"3.7 extend：合并对象","slug":"_3-7-extend：合并对象"},{"level":3,"title":"3.8  remove：移除数组的一项","slug":"_3-8-remove：移除数组的一项"},{"level":3,"title":"3.9 hasOwn：判断一个属性是否属于某个对象","slug":"_3-9-hasown：判断一个属性是否属于某个对象"},{"level":3,"title":"3.10 判断是否某种类型","slug":"_3-10-判断是否某种类型"},{"level":3,"title":"3.11 toRawType：对象转字符串，截取后第八位到倒数第二位。","slug":"_3-11-torawtype：对象转字符串，截取后第八位到倒数第二位。"},{"level":3,"title":"3.12  isPlainObject：判断是否纯粹的对象","slug":"_3-12-isplainobject：判断是否纯粹的对象"},{"level":3,"title":"3.13 isIntegerKey：判断是不是数字型的字符串 key 值","slug":"_3-13-isintegerkey：判断是不是数字型的字符串-key-值"},{"level":3,"title":"3.14 isReservedProp：判断该属性是否为保留属性","slug":"_3-14-isreservedprop：判断该属性是否为保留属性"},{"level":3,"title":"3.15 cacheStringFunction 缓存字符串的函数","slug":"_3-15-cachestringfunction-缓存字符串的函数"},{"level":3,"title":"3.16 hasChanged：判断值是否有变化","slug":"_3-16-haschanged：判断值是否有变化"},{"level":3,"title":"3.17  invokeArrayFns：执行数组里的函数","slug":"_3-17-invokearrayfns：执行数组里的函数"},{"level":3,"title":"3.18 def：定义一个不可枚举的对象","slug":"_3-18-def：定义一个不可枚举的对象"},{"level":3,"title":"3.19 toNumber：转数字","slug":"_3-19-tonumber：转数字"},{"level":3,"title":"3.20 getGlobalThis：全局对象","slug":"_3-20-getglobalthis：全局对象"},{"level":2,"title":"4. 感想","slug":"_4-感想"}],"relativePath":"docs/vue3-utils.md","lastUpdated":1633572531484.625}';var l={};const p=s("blockquote",null,[s("p",null,[a("【若川】Vue3 源码基础工具函数解读链接："),s("a",{href:"https://juejin.cn/post/6994976281053888519",target:"_blank",rel:"noopener noreferrer"},"https://juejin.cn/post/6994976281053888519")])],-1),c=s("h2",{id:"_1-解读前的准备"},[s("a",{class:"header-anchor",href:"#_1-解读前的准备","aria-hidden":"true"},"#"),a(" 1. 解读前的准备")],-1),r=s("p",null,[a("粗略阅读了川哥的文章之后，感觉这期跟上一期不一样。上一期主要学习如何实现某个功能，而这一期主要是学习 "),s("strong",null,"Vue3 源码中的工具函数"),a("，以及 "),s("strong",null,"Vue3 源码的一些调试技巧"),a("。虽然看起来偏基础，但我觉得很考验一个程序员的基本功和耐心。")],-1),u=s("p",null,"学习目标：",-1),k=s("p",null,"1）调试源码之打包构建项目代码，生成 sourcemap 调试源码",-1),i=s("p",null,"2）学习源码中的工具函数",-1),d=s("p",null,"目标：跟着川哥的文章走完一遍调试的流程，动手敲工具函数，对外输出记录文档。",-1),g=s("p",null,"资源准备：",-1),y=s("p",null,[a("Vue3 源码地址："),s("code",null,"https://github.com/vuejs/vue-next")],-1),h=s("h2",{id:"_2-源码调试"},[s("a",{class:"header-anchor",href:"#_2-源码调试","aria-hidden":"true"},"#"),a(" 2. 源码调试")],-1),b=s("h3",{id:"_2-1-阅读开源项目的-readme-md-和贡献指南-contributing-md"},[s("a",{class:"header-anchor",href:"#_2-1-阅读开源项目的-readme-md-和贡献指南-contributing-md","aria-hidden":"true"},"#"),a(" 2.1 阅读开源项目的 "),s("a",{href:"http://README.md",target:"_blank",rel:"noopener noreferrer"},"README.md"),a(" 和贡献指南 "),s("a",{href:"http://contributing.md",target:"_blank",rel:"noopener noreferrer"},"contributing.md")],-1),f=s("p",null,[a("我觉得这两个文件对阅读源码的开发者来说十分重要。"),s("a",{href:"http://README.md",target:"_blank",rel:"noopener noreferrer"},"README.md"),a(" 描述的是项目的基本信息，它可以快速了解这个项目的全貌。贡献指南 "),s("a",{href:"http://contributing.md",target:"_blank",rel:"noopener noreferrer"},"contributing.md"),a(" 会包含如何参与项目开发，项目打包/运行命令，项目目录结构等等，它能帮助你更好地调试/参与开发源码。在 "),s("a",{href:"http://contributing.md",target:"_blank",rel:"noopener noreferrer"},"contributing.md"),a(" 中我看到了一些比较感兴趣的知识点，比如打包构建格式/配置，包依赖处理。")],-1),m=s("h3",{id:"_2-2-打包构建项目代码"},[s("a",{class:"header-anchor",href:"#_2-2-打包构建项目代码","aria-hidden":"true"},"#"),a(" 2.2 打包构建项目代码")],-1),w=s("p",null,[a("安装完依赖，直接运行"),s("code",null,"yarn build"),a("就可以打包 Vue3 的项目代码了，打包的产物如下（以 shared 模块为例）：")],-1),A=s("p",null,[s("img",{src:"data:image/png;base64,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",alt:""})],-1),v=s("p",null,[a("这里的 "),s("code",null,"cjs"),a("，"),s("code",null,"esm"),a(" 是 JS 里用来实现【模块化】的不同规则，JS 的模块化标准还有 "),s("code",null,"amd"),a("，"),s("code",null,"umd"),a("，"),s("code",null,"iife"),a("。")],-1),E=s("ul",null,[s("li",null,'CJS，CommonJS，只能在 NodeJS 上运行，使用 require("module") 读取并加载模块，不支持浏览器'),s("li",null,[a("ESM，ECMAScript Module，现在使用的模块方案，使用 import export 来管理依赖，浏览器直接通过 "),s("code",null,'<script type="module">'),a(' 即可使用该写法。NodeJS 可以通过使用 mjs 后缀或者在 package.json 添加 "type": "module" 来使用')])],-1),x=s("h3",{id:"_2-3-生成-sourcemap-调试-vue-next-源码"},[s("a",{class:"header-anchor",href:"#_2-3-生成-sourcemap-调试-vue-next-源码","aria-hidden":"true"},"#"),a(" 2.3 生成 sourcemap 调试 vue-next 源码")],-1),C=s("p",null,[a("在贡献指南 "),s("a",{href:"http://contributing.md",target:"_blank",rel:"noopener noreferrer"},"contributing.md"),a(" 文件中描述了如何生成 sourcemap 文件：添加【--sourcemap】参数即可。")],-1),I=s("div",{class:"language-"},[s("pre",null,[s("code",null,"node scripts/dev.js --sourcemap\n")])],-1),j=s("p",null,"packages/vue/dist/vue.global.js.map 就是 sourcemap 文件了。",-1),S=s("p",null,"sourcemap 是一个信息文件，里面储存着位置信息，转换后的代码的每一个位置，所对应的转换前的位置。有了它，出错时出错工具将直接显示原始代码，而不是转换后的代码，方便调试。",-1),R=s("h2",{id:"_3-工具函数（ts-版）"},[s("a",{class:"header-anchor",href:"#_3-工具函数（ts-版）","aria-hidden":"true"},"#"),a(" 3. 工具函数（TS 版）")],-1),_=s("h3",{id:"_3-1-babelparserdefaultplugins：babel-解析默认插件"},[s("a",{class:"header-anchor",href:"#_3-1-babelparserdefaultplugins：babel-解析默认插件","aria-hidden":"true"},"#"),a(" 3.1 babelParserDefaultPlugins：babel 解析默认插件")],-1),P=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"/**\n * List of @babel/parser plugins that are used for template expression\n * transforms and SFC script transforms. By default we enable proposals slated\n * for ES2020. This will need to be updated as the spec moves forward.\n * Full list at https://babeljs.io/docs/en/next/babel-parser#plugins\n */"),a("\n"),s("span",{class:"token keyword"},"const"),a(" babelParserDefaultPlugins "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"["),a("\n  "),s("span",{class:"token string"},"'bigInt'"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token string"},"'optionalChaining'"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token string"},"'nullishCoalescingOperator'"),a("\n"),s("span",{class:"token punctuation"},"]"),a(),s("span",{class:"token keyword"},"as"),a(),s("span",{class:"token keyword"},"const"),a("\n")])])],-1),B=s("p",null,[a("它定义了三个默认插件， "),s("code",null,"as const"),a(" 这个语法叫 "),s("a",{href:"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-4.html#const-assertions",target:"_blank",rel:"noopener noreferrer"},"const 断言"),a("，它可以创建完整的 readonly 对象（只读状态），编译器可以通过 as const 推断出可用于的最具体的表达类型。")],-1),O=s("h3",{id:"_3-2-empty-obj：空对象，empty-arr：空数组"},[s("a",{class:"header-anchor",href:"#_3-2-empty-obj：空对象，empty-arr：空数组","aria-hidden":"true"},"#"),a(" 3.2 EMPTY_OBJ：空对象，EMPTY_ARR：空数组")],-1),T=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token constant"},"EMPTY_OBJ"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a(),s("span",{class:"token keyword"},"readonly"),a(),s("span",{class:"token punctuation"},"["),a("key"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),a(),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(" __DEV__\n  "),s("span",{class:"token operator"},"?"),a(" Object"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"freeze"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token punctuation"},"}"),a("\n\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token constant"},"EMPTY_ARR"),a(),s("span",{class:"token operator"},"="),a(" __DEV__ "),s("span",{class:"token operator"},"?"),a(" Object"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"freeze"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"["),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"["),s("span",{class:"token punctuation"},"]"),a("\n")])])],-1),F=s("p",null,"Object.freeze 冻结对象，不可修改对象的最外层，这样的写法可以降低在开发过程中发生错误。",-1),G=s("p",null,[s("strong",null,"DEV"),a(" 是一个环境变量，为了避免在生产环境报错，生产环境使用的还是 {} 和 []。")],-1),J=s("h3",{id:"_3-3-noop：空函数"},[s("a",{class:"header-anchor",href:"#_3-3-noop：空函数","aria-hidden":"true"},"#"),a(" 3.3 NOOP：空函数")],-1),Q=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"NOOP"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token punctuation"},"}"),a("\n")])])],-1),K=s("h3",{id:"_3-4-no：永远返回-false-的函数"},[s("a",{class:"header-anchor",href:"#_3-4-no：永远返回-false-的函数","aria-hidden":"true"},"#"),a(" 3.4 NO：永远返回 false 的函数")],-1),M=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"NO"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token boolean"},"false"),a("\n")])])],-1),D=s("h3",{id:"_3-5-ison：判断字符串是否以-on-开头，并且-on-后首字母是非小写字母"},[s("a",{class:"header-anchor",href:"#_3-5-ison：判断字符串是否以-on-开头，并且-on-后首字母是非小写字母","aria-hidden":"true"},"#"),a(" 3.5 isOn：判断字符串是否以 on 开头，并且 on 后首字母是非小写字母")],-1),N=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" onRE "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token regex"},[s("span",{class:"token regex-delimiter"},"/"),s("span",{class:"token regex-source language-regex"},"^on[^a-z]"),s("span",{class:"token regex-delimiter"},"/")]),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"isOn"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(" onRE"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"test"),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token punctuation"},")"),a("\n")])])],-1),X=s("p",null,"【^】符号在开头，表示是指【以什么开头】，在其他地方是指【非】。与之相反的是：【$】符合在结尾，则表示是以什么结尾。",-1),W=s("p",null,"日常开发中我们也经常会用到正则判断，可以收集起来，积累的数量多了就不用每次都去搜索了😉。",-1),z=s("h3",{id:"_3-6-ismodellistener：监听器"},[s("a",{class:"header-anchor",href:"#_3-6-ismodellistener：监听器","aria-hidden":"true"},"#"),a(" 3.6 isModelListener：监听器")],-1),H=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"isModelListener"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(" key"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"startsWith"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'onUpdate:'"),s("span",{class:"token punctuation"},")"),a("\n")])])],-1),q=s("p",null,"判断字符串是不是以【onUpdate:】开头",-1),Y=s("h3",{id:"_3-7-extend：合并对象"},[s("a",{class:"header-anchor",href:"#_3-7-extend：合并对象","aria-hidden":"true"},"#"),a(" 3.7 extend：合并对象")],-1),L=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" extend "),s("span",{class:"token operator"},"="),a(" Object"),s("span",{class:"token punctuation"},"."),a("assign\n")])])],-1),V=s("p",null,[a("其实 extend 就是 "),s("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign",target:"_blank",rel:"noopener noreferrer"},"Object.assign"),a("，用于将所有可枚举属性的值从一个或多个源对象分配到目标对象。")],-1),Z=s("h3",{id:"_3-8-remove：移除数组的一项"},[s("a",{class:"header-anchor",href:"#_3-8-remove：移除数组的一项","aria-hidden":"true"},"#"),a(" 3.8 remove：移除数组的一项")],-1),U=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" remove "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),s("span",{class:"token constant"},"T"),s("span",{class:"token operator"},">"),s("span",{class:"token punctuation"},"("),a("arr"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token constant"},"T"),s("span",{class:"token punctuation"},"["),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),a(" el"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token constant"},"T"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"const"),a(" i "),s("span",{class:"token operator"},"="),a(" arr"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"indexOf"),s("span",{class:"token punctuation"},"("),a("el"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token keyword"},"if"),a(),s("span",{class:"token punctuation"},"("),a("i "),s("span",{class:"token operator"},">"),a(),s("span",{class:"token operator"},"-"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    arr"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"splice"),s("span",{class:"token punctuation"},"("),a("i"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")])])],-1),$=s("p",null,"看源码的实现很好理解，传入一个数组和一个元素，判断元素是否存在在数组中，如果存在将其删除。",-1),nn=s("p",null,[a("川哥的文章里有说到，splice 是一个很耗性能的方法，删除数组中的一项，其他元素都要移动位置。"),s("strong",null,"所以在考虑性能的情况下，可以将删除的元素设为 null，在使用执行时为 null 的不执行，也可达到相同的效果"),a("。")],-1),sn=s("h3",{id:"_3-9-hasown：判断一个属性是否属于某个对象"},[s("a",{class:"header-anchor",href:"#_3-9-hasown：判断一个属性是否属于某个对象","aria-hidden":"true"},"#"),a(" 3.9 hasOwn：判断一个属性是否属于某个对象")],-1),an=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" hasOwnProperty "),s("span",{class:"token operator"},"="),a(" Object"),s("span",{class:"token punctuation"},"."),a("prototype"),s("span",{class:"token punctuation"},"."),a("hasOwnProperty\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" hasOwn "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("\n  val"),s("span",{class:"token operator"},":"),a(" object"),s("span",{class:"token punctuation"},","),a("\n  key"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),a(),s("span",{class:"token operator"},"|"),a(),s("span",{class:"token builtin"},"symbol"),a("\n"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" key "),s("span",{class:"token keyword"},"is"),a(),s("span",{class:"token keyword"},"keyof"),a(),s("span",{class:"token keyword"},"typeof"),a(" val "),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token function"},"hasOwnProperty"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"call"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token punctuation"},","),a(" key"),s("span",{class:"token punctuation"},")"),a("\n")])])],-1),tn=s("p",null,"函数本身很好理解，利用原型的 API：hasOwnProperty 来判断 key 是否是 obj 本身的属性。",-1),on=s("p",null,"但【key is keyof typeof val】可能会有些迷惑，这里包含了三个 typescript 的语法，意思是函数返回的 key 是 属于 val 对象的键的联合类型。",-1),en=s("ul",null,[s("li",null,"【is】关键字：它被称为类型谓词，用来判断一个变量属于某个接口或类型，比如：")],-1),ln=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" isNumber "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(),s("span",{class:"token builtin"},"number"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token keyword"},"typeof"),a(" val "),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'number'"),a("\n"),s("span",{class:"token keyword"},"const"),a(" isString "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(),s("span",{class:"token builtin"},"string"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token keyword"},"typeof"),a(" val "),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'string'"),a("\n")])])],-1),pn=s("ul",null,[s("li",null,"【keyof】关键字：用于获取某种类型的所有键，其返回类型是联合类型，比如：")],-1),cn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"interface"),a(),s("span",{class:"token class-name"},"Person"),a(),s("span",{class:"token punctuation"},"{"),a("\n    name"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},";"),a("\n    age"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"number"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token keyword"},"type"),a(),s("span",{class:"token class-name"},[s("span",{class:"token constant"},"K")]),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"keyof"),a(" Person"),s("span",{class:"token punctuation"},";"),a(),s("span",{class:"token comment"},'// "name" | "age"'),a("\n")])])],-1),rn=s("ul",null,[s("li",null,"【typeof】关键字：js 中的 typeof 只能获取几种类型，而在 ts 中 typeof 用来获取一个变量声明或对象的类型，比如：")],-1),un=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"interface"),a(),s("span",{class:"token class-name"},"Person"),a(),s("span",{class:"token punctuation"},"{"),a("\n  name"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},";"),a("\n  age"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"number"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\n"),s("span",{class:"token keyword"},"const"),a(" sem"),s("span",{class:"token operator"},":"),a(" Person "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a(" name"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'semlinker'"),s("span",{class:"token punctuation"},","),a(" age"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"30"),a(),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"type"),a(),s("span",{class:"token class-name"},"Sem"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"typeof"),a(" sem"),s("span",{class:"token punctuation"},";"),a(),s("span",{class:"token comment"},"// -> Person"),a("\n")])])],-1),kn=s("h3",{id:"_3-10-判断是否某种类型"},[s("a",{class:"header-anchor",href:"#_3-10-判断是否某种类型","aria-hidden":"true"},"#"),a(" 3.10 判断是否某种类型")],-1),dn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"// 判断数组"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isArray "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token builtin"},"Array"),s("span",{class:"token punctuation"},"."),a("isArray\n\n"),s("span",{class:"token comment"},"// 对象转字符串"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" objectToString "),s("span",{class:"token operator"},"="),a(" Object"),s("span",{class:"token punctuation"},"."),a("prototype"),s("span",{class:"token punctuation"},"."),a("toString\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" toTypeString "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("value"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),a(),s("span",{class:"token operator"},"=>"),a("\n  "),s("span",{class:"token function"},"objectToString"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"call"),s("span",{class:"token punctuation"},"("),a("value"),s("span",{class:"token punctuation"},")"),a("\n\n"),s("span",{class:"token comment"},"// 判断是否 Map 对象"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isMap "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(" Map"),s("span",{class:"token operator"},"<"),s("span",{class:"token builtin"},"any"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token builtin"},"any"),s("span",{class:"token operator"},">"),a(),s("span",{class:"token operator"},"=>"),a("\n  "),s("span",{class:"token function"},"toTypeString"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'[object Map]'"),a("\n\n"),s("span",{class:"token comment"},"// 判断是否 Set 对象"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isSet "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(" Set"),s("span",{class:"token operator"},"<"),s("span",{class:"token builtin"},"any"),s("span",{class:"token operator"},">"),a(),s("span",{class:"token operator"},"=>"),a("\n  "),s("span",{class:"token function"},"toTypeString"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'[object Set]'"),a("\n\n"),s("span",{class:"token comment"},"// 判断是否 Date 对象"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isDate "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(" Date "),s("span",{class:"token operator"},"=>"),a(" val "),s("span",{class:"token keyword"},"instanceof"),a(),s("span",{class:"token class-name"},"Date"),a("\n\n"),s("span",{class:"token comment"},"// 判断是否函数"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isFunction "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(),s("span",{class:"token builtin"},"Function"),a(),s("span",{class:"token operator"},"=>"),a("\n  "),s("span",{class:"token keyword"},"typeof"),a(" val "),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'function'"),a("\n\n"),s("span",{class:"token comment"},"// 判断是否字符串"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isString "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(),s("span",{class:"token builtin"},"string"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token keyword"},"typeof"),a(" val "),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'string'"),a("\n\n"),s("span",{class:"token comment"},"// 判断是否 Symbol"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isSymbol "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(),s("span",{class:"token builtin"},"symbol"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token keyword"},"typeof"),a(" val "),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'symbol'"),a("\n\n"),s("span",{class:"token comment"},"// 判断是否对象（不包括 null）"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isObject "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(" Record"),s("span",{class:"token operator"},"<"),s("span",{class:"token builtin"},"any"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token builtin"},"any"),s("span",{class:"token operator"},">"),a(),s("span",{class:"token operator"},"=>"),a("\n  val "),s("span",{class:"token operator"},"!=="),a(),s("span",{class:"token keyword"},"null"),a(),s("span",{class:"token operator"},"&&"),a(),s("span",{class:"token keyword"},"typeof"),a(" val "),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'object'"),a("\n\n"),s("span",{class:"token comment"},"// 判断是否 Promise"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isPromise "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),s("span",{class:"token constant"},"T"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token builtin"},"any"),s("span",{class:"token operator"},">"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(),s("span",{class:"token builtin"},"Promise"),s("span",{class:"token operator"},"<"),s("span",{class:"token constant"},"T"),s("span",{class:"token operator"},">"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"return"),a(),s("span",{class:"token function"},"isObject"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"&&"),a(),s("span",{class:"token function"},"isFunction"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token punctuation"},"."),a("then"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"&&"),a(),s("span",{class:"token function"},"isFunction"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token punctuation"},"."),s("span",{class:"token keyword"},"catch"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")])])],-1),gn=s("p",null,"有了这些函数就可以在工作中用起来啦。",-1),yn=s("h3",{id:"_3-11-torawtype：对象转字符串，截取后第八位到倒数第二位。"},[s("a",{class:"header-anchor",href:"#_3-11-torawtype：对象转字符串，截取后第八位到倒数第二位。","aria-hidden":"true"},"#"),a(" 3.11 toRawType：对象转字符串，截取后第八位到倒数第二位。")],-1),hn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" toRawType "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("value"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token comment"},'// extract "RawType" from strings like "[object RawType]"'),a("\n  "),s("span",{class:"token keyword"},"return"),a(),s("span",{class:"token function"},"toTypeString"),s("span",{class:"token punctuation"},"("),a("value"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"slice"),s("span",{class:"token punctuation"},"("),s("span",{class:"token number"},"8"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token operator"},"-"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")])])],-1),bn=s("p",null,"可以截取到 String Array 等这些类型，这个函数可以用来做类型判断。",-1),fn=s("h3",{id:"_3-12-isplainobject：判断是否纯粹的对象"},[s("a",{class:"header-anchor",href:"#_3-12-isplainobject：判断是否纯粹的对象","aria-hidden":"true"},"#"),a(" 3.12 isPlainObject：判断是否纯粹的对象")],-1),mn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isPlainObject "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token keyword"},"is"),a(" object "),s("span",{class:"token operator"},"=>"),a("\n  "),s("span",{class:"token function"},"toTypeString"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token string"},"'[object Object]'"),a("\n")])])],-1),wn=s("h3",{id:"_3-13-isintegerkey：判断是不是数字型的字符串-key-值"},[s("a",{class:"header-anchor",href:"#_3-13-isintegerkey：判断是不是数字型的字符串-key-值","aria-hidden":"true"},"#"),a(" 3.13 isIntegerKey：判断是不是数字型的字符串 key 值")],-1),An=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"isIntegerKey"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"unknown"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a("\n  "),s("span",{class:"token function"},"isString"),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"&&"),a("\n  key "),s("span",{class:"token operator"},"!=="),a(),s("span",{class:"token string"},"'NaN'"),a(),s("span",{class:"token operator"},"&&"),a("\n  key"),s("span",{class:"token punctuation"},"["),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},"]"),a(),s("span",{class:"token operator"},"!=="),a(),s("span",{class:"token string"},"'-'"),a(),s("span",{class:"token operator"},"&&"),a("\n  "),s("span",{class:"token string"},"''"),a(),s("span",{class:"token operator"},"+"),a(),s("span",{class:"token function"},"parseInt"),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"10"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"==="),a(" key\n")])])],-1),vn=s("p",null,"第一步先判断 key 是否是字符串类型（作为 key 值有两种类型，string 和 symbol），第二步排除 NaN 值，第三步排除 - 值（排除负数），第四步将 key 转换成数字再隐式转换为字符串，与原 key 对比。",-1),En=s("h3",{id:"_3-14-isreservedprop：判断该属性是否为保留属性"},[s("a",{class:"header-anchor",href:"#_3-14-isreservedprop：判断该属性是否为保留属性","aria-hidden":"true"},"#"),a(" 3.14 isReservedProp：判断该属性是否为保留属性")],-1),xn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"/**\n * Make a map and return a function for checking if a key\n * is in that map.\n * IMPORTANT: all calls of this function must be prefixed with\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\n * So that rollup can tree-shake them if necessary.\n */"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token function"},"makeMap"),s("span",{class:"token punctuation"},"("),a("\n  str"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},","),a("\n  expectsLowerCase"),s("span",{class:"token operator"},"?"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"boolean"),a("\n"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token builtin"},"boolean"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"const"),a(" map"),s("span",{class:"token operator"},":"),a(" Record"),s("span",{class:"token operator"},"<"),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token builtin"},"boolean"),s("span",{class:"token operator"},">"),a(),s("span",{class:"token operator"},"="),a(" Object"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"create"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"null"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token keyword"},"const"),a(" list"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"Array"),s("span",{class:"token operator"},"<"),s("span",{class:"token builtin"},"string"),s("span",{class:"token operator"},">"),a(),s("span",{class:"token operator"},"="),a(" str"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"split"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"','"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token keyword"},"for"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"let"),a(" i "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},";"),a(" i "),s("span",{class:"token operator"},"<"),a(" list"),s("span",{class:"token punctuation"},"."),a("length"),s("span",{class:"token punctuation"},";"),a(" i"),s("span",{class:"token operator"},"++"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    map"),s("span",{class:"token punctuation"},"["),a("list"),s("span",{class:"token punctuation"},"["),a("i"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"]"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token boolean"},"true"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n  "),s("span",{class:"token keyword"},"return"),a(" expectsLowerCase "),s("span",{class:"token operator"},"?"),a(" val "),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token operator"},"!"),s("span",{class:"token operator"},"!"),a("map"),s("span",{class:"token punctuation"},"["),a("val"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"toLowerCase"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"]"),a(),s("span",{class:"token operator"},":"),a(" val "),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token operator"},"!"),s("span",{class:"token operator"},"!"),a("map"),s("span",{class:"token punctuation"},"["),a("val"),s("span",{class:"token punctuation"},"]"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" isReservedProp "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token comment"},"/*#__PURE__*/"),a(),s("span",{class:"token function"},"makeMap"),s("span",{class:"token punctuation"},"("),a("\n  "),s("span",{class:"token comment"},'// the leading comma is intentional so empty string "" is also included'),a("\n  "),s("span",{class:"token string"},"',key,ref,'"),a(),s("span",{class:"token operator"},"+"),a("\n    "),s("span",{class:"token string"},"'onVnodeBeforeMount,onVnodeMounted,'"),a(),s("span",{class:"token operator"},"+"),a("\n    "),s("span",{class:"token string"},"'onVnodeBeforeUpdate,onVnodeUpdated,'"),a(),s("span",{class:"token operator"},"+"),a("\n    "),s("span",{class:"token string"},"'onVnodeBeforeUnmount,onVnodeUnmounted'"),a("\n"),s("span",{class:"token punctuation"},")"),a("\n\n"),s("span",{class:"token comment"},"// 使用："),a("\n"),s("span",{class:"token function"},"isReservedProp"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},'"key"'),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token comment"},"// true"),a("\n"),s("span",{class:"token function"},"isReservedProp"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},'"test"'),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token comment"},"// false"),a("\n"),s("span",{class:"token function"},"isReservedProp"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},'""'),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token comment"},"// true"),a("\n")])])],-1),Cn=s("p",null,"如何解读这个函数？先看 makeMap，它传入一个字符串，将这个字符串转换成数组，并循环赋值 key 給一个空对象map，然后返回一个包含参数 val 的闭包用来检查 val 是否是存在在字符串中。",-1),In=s("p",null,'isReservedProp("key") 其实就相当于 makeMap(str)("key")。',-1),jn=s("h3",{id:"_3-15-cachestringfunction-缓存字符串的函数"},[s("a",{class:"header-anchor",href:"#_3-15-cachestringfunction-缓存字符串的函数","aria-hidden":"true"},"#"),a(" 3.15 cacheStringFunction 缓存字符串的函数")],-1),Sn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" cacheStringFunction "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),s("span",{class:"token constant"},"T"),a(),s("span",{class:"token keyword"},"extends"),a(),s("span",{class:"token punctuation"},"("),a("str"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token operator"},">"),s("span",{class:"token punctuation"},"("),a("fn"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token constant"},"T"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token constant"},"T"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"const"),a(" cache"),s("span",{class:"token operator"},":"),a(" Record"),s("span",{class:"token operator"},"<"),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token operator"},">"),a(),s("span",{class:"token operator"},"="),a(" Object"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"create"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"null"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token keyword"},"return"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"("),a("str"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(" hit "),s("span",{class:"token operator"},"="),a(" cache"),s("span",{class:"token punctuation"},"["),a("str"),s("span",{class:"token punctuation"},"]"),a("\n    "),s("span",{class:"token keyword"},"return"),a(" hit "),s("span",{class:"token operator"},"||"),a(),s("span",{class:"token punctuation"},"("),a("cache"),s("span",{class:"token punctuation"},"["),a("str"),s("span",{class:"token punctuation"},"]"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"fn"),s("span",{class:"token punctuation"},"("),a("str"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token keyword"},"as"),a(),s("span",{class:"token builtin"},"any"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\n"),s("span",{class:"token comment"},"// 使用例子："),a("\n"),s("span",{class:"token comment"},'// "-"连字符转小驼峰'),a("\n"),s("span",{class:"token comment"},"// \\w：0-9a-zA-Z_，表示由数字，大小写字母和下划线组成"),a("\n"),s("span",{class:"token keyword"},"const"),a(" camelizeRE "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token regex"},[s("span",{class:"token regex-delimiter"},"/"),s("span",{class:"token regex-source language-regex"},"-(\\w)"),s("span",{class:"token regex-delimiter"},"/"),s("span",{class:"token regex-flags"},"g")]),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" camelize "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"cacheStringFunction"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"("),a("str"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"return"),a(" str"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"replace"),s("span",{class:"token punctuation"},"("),a("camelizeRE"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"("),a("_"),s("span",{class:"token punctuation"},","),a(" c"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"("),a("c "),s("span",{class:"token operator"},"?"),a(" c"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"toUpperCase"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"''"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token function"},"camelize"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},'"text-node"'),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token comment"},'// "textNode"'),a("\n\n"),s("span",{class:"token comment"},'// 大写字母转"-"连字符'),a("\n"),s("span",{class:"token comment"},"// \\B 是指 非 \\B 单词边界。"),a("\n"),s("span",{class:"token keyword"},"const"),a(" hyphenateRE "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token regex"},[s("span",{class:"token regex-delimiter"},"/"),s("span",{class:"token regex-source language-regex"},"\\B([A-Z])"),s("span",{class:"token regex-delimiter"},"/"),s("span",{class:"token regex-flags"},"g")]),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"const"),a(" hyphenate "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"cacheStringFunction"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"("),a("str"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(" str"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"replace"),s("span",{class:"token punctuation"},"("),a("hyphenateRE"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'-$1'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"toLowerCase"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token function"},"hyphenate"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},'"WordPress"'),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token comment"},'// "word-press"'),a("\n\n"),s("span",{class:"token comment"},"// 首字母转大写"),a("\n"),s("span",{class:"token keyword"},"const"),a(" capitalize "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"cacheStringFunction"),s("span",{class:"token punctuation"},"("),a("\n  "),s("span",{class:"token punctuation"},"("),a("str"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(" str"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"charAt"),s("span",{class:"token punctuation"},"("),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"toUpperCase"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"+"),a(" str"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"slice"),s("span",{class:"token punctuation"},"("),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token keyword"},"const"),a(" toHandlerKey "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"cacheStringFunction"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"("),a("str"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"("),a("str "),s("span",{class:"token operator"},"?"),a(),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"on"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),s("span",{class:"token function"},"capitalize"),s("span",{class:"token punctuation"},"("),a("str"),s("span",{class:"token punctuation"},")"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),a(),s("span",{class:"token operator"},":"),a(),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token function"},"toHandlerKey"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'click'"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token comment"},'// "onClick"'),a("\n")])])],-1),Rn=s("p",null,"这个函数和上面 makeMap 函数类似，传入一个 fn 参数，返回一个包含参数 str 的闭包，将这个 str 字符串作为 key 赋值给一个空对象 cache，闭包返回 cache[str] || (cache[str] = fn(str))。",-1),_n=s("p",null,"【cache[str] || (cache[str] = fn(str))】的意思是，如果 cache 有缓存到 str 这个 key，直接返回对应的值，否则，先调用 fn(str)，再赋值给 cache[str]，这样可以将需要经过 fn 函数处理的字符串缓存起来，避免多次重复处理字符串。",-1),Pn=s("h3",{id:"_3-16-haschanged：判断值是否有变化"},[s("a",{class:"header-anchor",href:"#_3-16-haschanged：判断值是否有变化","aria-hidden":"true"},"#"),a(" 3.16 hasChanged：判断值是否有变化")],-1),Bn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" hasChanged "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("value"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),s("span",{class:"token punctuation"},","),a(" oldValue"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"boolean"),a(),s("span",{class:"token operator"},"=>"),a("\n  "),s("span",{class:"token operator"},"!"),a("Object"),s("span",{class:"token punctuation"},"."),s("span",{class:"token keyword"},"is"),s("span",{class:"token punctuation"},"("),a("value"),s("span",{class:"token punctuation"},","),a(" oldValue"),s("span",{class:"token punctuation"},")"),a("\n")])])],-1),On=s("p",null,[s("a",{href:"./about:blank.html"},"Object.is"),a(" 方法判断两个值是否为同一个值。")],-1),Tn=s("h3",{id:"_3-17-invokearrayfns：执行数组里的函数"},[s("a",{class:"header-anchor",href:"#_3-17-invokearrayfns：执行数组里的函数","aria-hidden":"true"},"#"),a(" 3.17 invokeArrayFns：执行数组里的函数")],-1),Fn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"invokeArrayFns"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("fns"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"Function"),s("span",{class:"token punctuation"},"["),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),a(" arg"),s("span",{class:"token operator"},"?"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"for"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"let"),a(" i "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},";"),a(" i "),s("span",{class:"token operator"},"<"),a(" fns"),s("span",{class:"token punctuation"},"."),a("length"),s("span",{class:"token punctuation"},";"),a(" i"),s("span",{class:"token operator"},"++"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    fns"),s("span",{class:"token punctuation"},"["),a("i"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"("),a("arg"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")])])],-1),Gn=s("p",null,"这种写法方便统一执行多个函数。",-1),Jn=s("h3",{id:"_3-18-def：定义一个不可枚举的对象"},[s("a",{class:"header-anchor",href:"#_3-18-def：定义一个不可枚举的对象","aria-hidden":"true"},"#"),a(" 3.18 def：定义一个不可枚举的对象")],-1),Qn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"def"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("obj"),s("span",{class:"token operator"},":"),a(" object"),s("span",{class:"token punctuation"},","),a(" key"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"string"),a(),s("span",{class:"token operator"},"|"),a(),s("span",{class:"token builtin"},"symbol"),s("span",{class:"token punctuation"},","),a(" value"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  Object"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"defineProperty"),s("span",{class:"token punctuation"},"("),a("obj"),s("span",{class:"token punctuation"},","),a(" key"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"{"),a("\n    configurable"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n    enumerable"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},","),a("\n    value\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")])])],-1),Kn=s("p",null,[s("a",{href:"./about:blank.html"},"Object.defineProperty"),a("，语法："),s("em",null,"Object.defineProperty(obj, prop, descriptor)"),a("，它是一个非常重要的 API，经常会在源码中看见它。")],-1),Mn=s("blockquote",null,[s("p",null,"在 ES3 中，除了一些内置属性（如：Math.PI），对象所有的属性在任何时候都可以被[修改、插入、删除。"),s("p",null,"在ES5 中，我们可以设置属性是否可以被改变或是被删除——在这之前，它是内置属性的特权。"),s("p",null,[a("ES5 中引入了"),s("strong",null,"属性描述符"),a("的概念，我们可以通过它对所定义的属性有更大的控制权，这些"),s("strong",null,"属性描述符"),a("（特性）包括： value —— 获取属性时所返回的值。 writable —— 该属性是否可写。 enumerable —— 该属性在 for in 循环中是否会被枚举。 configurable —— 该属性是否可被删除。 set() —— 该属性的更新操作所调用的函数。 get() —— 获取属性值时所调用的函数。")]),s("p",null,[a("另外，"),s("strong",null,"数据描述符"),a("（其中属性为：enumerable，configurable，value，writable）与"),s("strong",null,"存取描述符"),a("（其中属性为enumerable，configurable，set()，get()）之间是有互斥关系的。在定义了set()和get()之后，描述符会认为存取操作已被定义了，其中再定义 value 和 writable 会"),s("strong",null,"引起错误"),a("。")])],-1),Dn=s("h3",{id:"_3-19-tonumber：转数字"},[s("a",{class:"header-anchor",href:"#_3-19-tonumber：转数字","aria-hidden":"true"},"#"),a(" 3.19 toNumber：转数字")],-1),Nn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[a("  "),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" toNumber "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(" n "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"parseFloat"),s("span",{class:"token punctuation"},"("),a("val"),s("span",{class:"token punctuation"},")"),a("\n    "),s("span",{class:"token keyword"},"return"),a(),s("span",{class:"token function"},"isNaN"),s("span",{class:"token punctuation"},"("),a("n"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"?"),a(" val "),s("span",{class:"token operator"},":"),a(" n\n  "),s("span",{class:"token punctuation"},"}"),a("\n")])])],-1),Xn=s("h3",{id:"_3-20-getglobalthis：全局对象"},[s("a",{class:"header-anchor",href:"#_3-20-getglobalthis：全局对象","aria-hidden":"true"},"#"),a(" 3.20 getGlobalThis：全局对象")],-1),Wn=s("div",{class:"language-typescript"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"let"),a(" _globalThis"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),a("\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"const"),a(" getGlobalThis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token builtin"},"any"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"return"),a(),s("span",{class:"token punctuation"},"("),a("\n    _globalThis "),s("span",{class:"token operator"},"||"),a("\n    "),s("span",{class:"token punctuation"},"("),a("_globalThis "),s("span",{class:"token operator"},"="),a("\n      "),s("span",{class:"token keyword"},"typeof"),a(" globalThis "),s("span",{class:"token operator"},"!=="),a(),s("span",{class:"token string"},"'undefined'"),a("\n        "),s("span",{class:"token operator"},"?"),a(" globalThis\n        "),s("span",{class:"token operator"},":"),a(),s("span",{class:"token keyword"},"typeof"),a(" self "),s("span",{class:"token operator"},"!=="),a(),s("span",{class:"token string"},"'undefined'"),a("\n        "),s("span",{class:"token operator"},"?"),a(" self\n        "),s("span",{class:"token operator"},":"),a(),s("span",{class:"token keyword"},"typeof"),a(" window "),s("span",{class:"token operator"},"!=="),a(),s("span",{class:"token string"},"'undefined'"),a("\n        "),s("span",{class:"token operator"},"?"),a(" window\n        "),s("span",{class:"token operator"},":"),a(),s("span",{class:"token keyword"},"typeof"),a(" global "),s("span",{class:"token operator"},"!=="),a(),s("span",{class:"token string"},"'undefined'"),a("\n        "),s("span",{class:"token operator"},"?"),a(" global\n        "),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")])])],-1),zn=s("p",null,'第一次调用这个函数时，_globalThis 肯定为 "undefined"，接着执行【||】后的语句。',-1),Hn=s("ol",null,[s("li",null,[s("code",null,"typeof globalThis !== 'undefined'"),a(" 如果 globalThis 不是 undefined，返回 globalThis："),s("a",{href:"https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FglobalThis",target:"_blank",rel:"noopener noreferrer"},"MDN globalThis"),a("。否则 ->")]),s("li",null,[s("code",null,"typeof self !== 'undefined'"),a(" 如果 self 不是 undefined，返回 self。否则 ->")]),s("li",null,[s("code",null,"typeof window !== 'undefined'"),a(" 如果 window 不是 undefined，返回 widow。否则 ->")]),s("li",null,[s("code",null,"typeof global !== 'undefined'"),a(" 如果 global 不是 undefined，返回 global。否则 ->")]),s("li",null,"返回 {}")],-1),qn=s("p",null,"第二次调用这个函数，就直接返回 _globalThis，不需要第二次继续判断了👍",-1),Yn=s("h2",{id:"_4-感想"},[s("a",{class:"header-anchor",href:"#_4-感想","aria-hidden":"true"},"#"),a(" 4. 感想")],-1),Ln=s("ul",null,[s("li",null,[s("p",null,"很多工具函数可以通过做缓存以达到优化性能的目的")]),s("li",null,[s("p",null,[s("a",{href:"https://mp.weixin.qq.com/s/Y3nL3GPcxiqb3zK6pEuycg",target:"_blank",rel:"noopener noreferrer"},"Object 对象 API 解析"),a(" 无论什么时候都不过时，适合反复阅读，加深对 Object 的理解")])]),s("li",null,[s("p",null,"工作中如果有用到类似的工具函数，可参考这些写法")]),s("li",null,[s("p",null,"学习了一些 typescript 不太常见的语法： 【! 非空断言操作符】【?? 空值合并运算符】")]),s("li",null,[s("p",null,"生成 sourcemap 调试 ts 代码")])],-1);l.render=function(a,e,l,Vn,Zn,Un){const $n=o("Comment");return t(),n("div",null,[p,c,r,u,k,i,d,g,y,h,b,f,m,w,A,v,E,x,C,I,j,S,R,_,P,B,O,T,F,G,J,Q,K,M,D,N,X,W,z,H,q,Y,L,V,Z,U,$,nn,sn,an,tn,on,en,ln,pn,cn,rn,un,kn,dn,gn,yn,hn,bn,fn,mn,wn,An,vn,En,xn,Cn,In,jn,Sn,Rn,_n,Pn,Bn,On,Tn,Fn,Gn,Jn,Qn,Kn,Mn,Dn,Nn,Xn,Wn,zn,Hn,qn,Yn,Ln,s($n)])};export default l;export{e as __pageData};
